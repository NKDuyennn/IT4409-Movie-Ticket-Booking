<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Edit Promotion - MyShowz Admin</title>
  <link rel="stylesheet" href="../assets/css/style-starter.css">
  <link rel="stylesheet" href="assets/css/admin.css">
  <link rel="stylesheet" href="assets/css/pages/promotions.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="//fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;1,600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="admin-layout">
    <!-- Sidebar -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="admin-main">
      <div class="admin-header">
        <div class="header-breadcrumb">
          <a href="promotions.html"><i class="fas fa-arrow-left mr-1"></i> Back to Promotions</a>
        </div>
        <h1>Edit <span style="color: #fbbf24;">Promotion</span></h1>
        <p>Update promotion information and discount rules</p>
      </div>

      <!-- Loading State -->
      <div class="loading-state" id="page-loading-state">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Loading promotion data...</p>
      </div>

      <!-- Promotion Edit Form -->
      <div class="content-section" id="edit-form-container" style="display: none;">
        <form id="promotion-form">
          <input type="hidden" id="promotion-id">

          <div class="form-grid">
            <div class="form-group full-width">
              <label for="promotion-code">Promotion Code <span class="required">*</span></label>
              <input type="text" id="promotion-code" name="code" required placeholder="e.g., SUMMER2024" style="text-transform: uppercase;">
              <small class="form-text">Code will be automatically converted to uppercase</small>
            </div>

            <div class="form-group full-width">
              <label for="promotion-name">Promotion Name <span class="required">*</span></label>
              <input type="text" id="promotion-name" name="name" required placeholder="Enter promotion name">
            </div>

            <div class="form-group full-width">
              <label for="promotion-description">Description</label>
              <textarea id="promotion-description" name="description" rows="3" placeholder="Enter promotion description"></textarea>
            </div>

            <div class="form-group">
              <label for="discount-type">Discount Type <span class="required">*</span></label>
              <select id="discount-type" required>
                <option value="percentage">Percentage (%)</option>
                <option value="amount">Fixed Amount (VND)</option>
              </select>
            </div>

            <div class="form-group" id="percentage-group">
              <label for="discount-percentage">Discount Percentage <span class="required">*</span></label>
              <input type="number" id="discount-percentage" name="discount_percentage" min="0" max="100" step="0.01" placeholder="e.g., 10">
            </div>

            <div class="form-group" id="amount-group" style="display: none;">
              <label for="discount-amount">Discount Amount (VND) <span class="required">*</span></label>
              <input type="number" id="discount-amount" name="discount_amount" min="0" step="1000" placeholder="e.g., 50000">
            </div>

            <div class="form-group">
              <label for="valid-from">Valid From <span class="required">*</span></label>
              <input type="date" id="valid-from" name="valid_from" required>
            </div>

            <div class="form-group">
              <label for="valid-to">Valid To <span class="required">*</span></label>
              <input type="date" id="valid-to" name="valid_to" required>
            </div>

            <div class="form-group">
              <label for="usage-limit">Usage Limit</label>
              <input type="number" id="usage-limit" name="usage_limit" min="0" placeholder="Leave empty for unlimited">
              <small class="form-text">Maximum number of times this promotion can be used</small>
            </div>

            <div class="form-group">
              <label for="is-active">Status <span class="required">*</span></label>
              <select id="is-active" name="is_active" required>
                <option value="true">Active</option>
                <option value="false">Inactive</option>
              </select>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="window.location.href='promotions.html'">
              <i class="fas fa-times mr-1"></i> Cancel
            </button>
            <button type="submit" class="btn-primary" id="submit-btn">
              <i class="fas fa-save mr-1"></i> Save Changes
            </button>
          </div>
        </form>
      </div>
    </main>
  </div>

  <script src="../assets/js/jquery-1.9.1.min.js"></script>
  <script src="../assets/js/config.js"></script>
  <script src="../assets/js/auth-handler.js"></script>
  <script src="assets/js/admin-common.js"></script>
  <script src="assets/js/promotion-edit.js"></script>
</body>
</html>

